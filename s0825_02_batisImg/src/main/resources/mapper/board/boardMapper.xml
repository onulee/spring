<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.site.dao.BoardMapper">
   <!-- 검색 게시글 여러개 가져오기 -->
   <select id="findByCaAndSWord"  resultType="com.site.dto.Board">
      select * from board 
      <if test="category == 'all'">
       where btitle like '%'||#{sWord}||'%' or bcontent like '%'||#{sWord}||'%' 
      </if>
      <if test="category == 'btitle' or category == 'bcontent'">
       where ${category} like '%'||#{sWord}||'%'
      </if>
      order by bgroup desc, bstep asc
   </select>
   
   <!-- 게시글 전체개수 -->
   <select id="findByCount" resultType="int">
      select count(*) from board
   </select>
   
   <!-- 게시글 전체가져오기 -->
   <select id="findAll"  resultType="com.site.dto.Board">
      select * from board 
      order by bgroup desc,bstep asc
   </select>
   
   
   <!-- 게시글 1개 가져오기 -->
   <select id="findBno" resultType="com.site.dto.Board">
      select * from board where bno = #{bno}
   </select>
   <!-- 게시판 글쓰기 저장 -->
   <insert id="save">
      insert into board values (board_seq.nextval,#{btitle},
        #{bcontent},#{id},board_seq.currval,0,0,0,#{bfile},sysdate
      )
   </insert>
   <!--  게시글 삭제 -->
   <delete id="delete">
      delete board where bno=#{bno}
   </delete>
   <!--  게시글 수정 저장 -->
   <update id="update">
      update board set
      btitle=#{btitle},bcontent=#{bcontent},bfile=#{bfile},
      bdate = sysdate
      where bno = #{bno}
   </update>
   
  
</mapper>



